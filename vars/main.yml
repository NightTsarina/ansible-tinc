---
# vim:ts=2:sw=2:et:ai:sts=2
tinc__other_hosts: >-
   {{
     hostvars.values() |
     selectattr('inventory_hostname', 'ne', inventory_hostname) |
     selectattr('tinc__vpn_addresses', 'defined') |
     selectattr('tinc__public_addr', 'defined') |
     map(attribute='tinc__public_addr') |
     list
   +
     hostvars.values() |
     selectattr('inventory_hostname', 'ne', inventory_hostname) |
     selectattr('tinc__vpn_addresses', 'defined') |
     selectattr('tinc__public_addr', 'undefined') |
     map(attribute='ansible_host') |
     list
   }}

tinc__use_systemd: >-
  {{ True if (ansible_service_mgr|d() and ansible_service_mgr == "systemd")
     else False }}
tinc__service_name: >-
  {{ "tinc@" + tinc__netname if tinc__use_systemd else "tinc" }}
